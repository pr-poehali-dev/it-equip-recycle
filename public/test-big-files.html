<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìÅ –¢–µ—Å—Ç –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (–¥–æ 20–ú–ë)</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .file-list { margin: 20px 0; }
        .file-item { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 10px; 
            background: #f0f9ff; 
            border: 1px solid #0ea5e9; 
            border-radius: 6px; 
            margin: 5px 0; 
        }
        .file-small { background: #dcfce7; border-color: #22c55e; }
        .file-medium { background: #fef3c7; border-color: #f59e0b; }
        .file-large { background: #fef2f2; border-color: #ef4444; }
        .remove-btn { 
            background: #ef4444; 
            color: white; 
            border: none; 
            padding: 5px 10px; 
            border-radius: 4px; 
            cursor: pointer; 
        }
        .upload-area {
            border: 2px dashed #ccc;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            margin: 20px 0;
        }
        .upload-area:hover { border-color: #0ea5e9; }
        button { 
            background: #0ea5e9; 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 16px; 
            margin: 5px;
        }
        button:hover { background: #0284c7; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        input[type="text"], input[type="email"], input[type="tel"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .info { background: #dbeafe; border: 1px solid #3b82f6; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .warning { background: #fef3c7; border: 1px solid #f59e0b; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .success { background: #dcfce7; border: 1px solid #22c55e; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .error { background: #fef2f2; border: 1px solid #ef4444; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .progress { margin: 20px 0; }
        .progress-bar { 
            width: 100%; 
            height: 20px; 
            background: #f3f4f6; 
            border-radius: 10px; 
            overflow: hidden; 
        }
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, #3b82f6, #1d4ed8); 
            transition: width 0.3s ease; 
        }
    </style>
</head>
<body>
    <h1>üìÅ –¢–µ—Å—Ç –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (–¥–æ 20–ú–ë)</h1>
    <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π —á–µ—Ä–µ–∑ utilizon.pro</p>

    <div class="info">
        <h3>üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã:</h3>
        <ul>
            <li><strong>–†–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:</strong> –¥–æ 20 –ú–ë (—É–≤–µ–ª–∏—á–µ–Ω–æ —Å 3 –ú–ë)</li>
            <li><strong>–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤:</strong> –¥–æ 100 –ú–ë</li>
            <li><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤:</strong> –¥–æ 5 —Ñ–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑</li>
            <li><strong>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:</strong> .xlsx, .xls, .docx, .doc, .pdf</li>
        </ul>
    </div>

    <div class="warning">
        <h3>‚ö° –£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:</h3>
        <ul>
            <li><strong>–ú–∞–ª—ã–µ —Ñ–∞–π–ª—ã</strong> (–¥–æ 4–ú–ë –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä) ‚Üí FormSubmit (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)</li>
            <li><strong>–ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã</strong> (—Å–≤—ã—à–µ 4–ú–ë) ‚Üí File.io + email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</li>
            <li><strong>–ê–Ω—Ç–∏–≤–∏—Ä—É—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</strong> –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π</li>
        </ul>
    </div>

    <form id="testForm">
        <input type="text" name="name" placeholder="–í–∞—à–µ –∏–º—è" required>
        <input type="email" name="email" placeholder="Email" required>
        <input type="tel" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
        
        <div class="upload-area" onclick="document.getElementById('fileInput').click()">
            <p><strong>üìÅ –í—ã–±–µ—Ä–∏—Ç–µ –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã</strong></p>
            <p>–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –æ—Ç–ø—Ä–∞–≤–∫–∏</p>
            <input type="file" id="fileInput" multiple accept=".xlsx,.xls,.docx,.doc,.pdf" style="display: none;">
        </div>
        
        <div id="uploadProgress" class="progress" style="display: none;">
            <p id="progressText">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤...</p>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill" style="width: 0%"></div>
            </div>
        </div>
        
        <div id="fileList" class="file-list"></div>
        
        <button type="submit" id="submitBtn" disabled>üìß –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª—ã</button>
        <button type="button" onclick="clearFiles()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
    </form>

    <div id="result" style="margin-top: 20px;"></div>

    <script>
        let selectedFiles = [];
        const maxFiles = 5;
        const maxFileSize = 20 * 1024 * 1024; // 20 –ú–ë
        const maxTotalSize = 100 * 1024 * 1024; // 100 –ú–ë –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä
        const smallFilesLimit = 4 * 1024 * 1024; // 4 –ú–ë –ª–∏–º–∏—Ç –¥–ª—è FormSubmit

        // –ü—Ä–æ—Å—Ç–∞—è –∞–Ω—Ç–∏–≤–∏—Ä—É—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
        async function quickVirusScan(file) {
            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞
                const allowedExtensions = ['.xlsx', '.xls', '.docx', '.doc', '.pdf'];
                const fileExtension = file.name.toLowerCase().substring(file.name.lastIndexOf('.'));
                
                if (!allowedExtensions.includes(fileExtension)) {
                    throw new Error(`–ù–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ: ${fileExtension}`);
                }

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞
                if (file.size > maxFileSize) {
                    throw new Error(`–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π: ${(file.size / 1024 / 1024).toFixed(2)} –ú–ë (–º–∞–∫—Å–∏–º—É–º 20 –ú–ë)`);
                }

                if (file.size === 0) {
                    throw new Error('–§–∞–π–ª –ø—É—Å—Ç–æ–π (0 –±–∞–π—Ç)');
                }

                // –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–≤—ã—Ö –±–∞–π—Ç–æ–≤
                const arrayBuffer = await file.arrayBuffer();
                const bytes = new Uint8Array(arrayBuffer.slice(0, 100)); // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 100 –±–∞–π—Ç –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤
                const pdfSignature = [0x25, 0x50, 0x44, 0x46]; // %PDF
                const zipSignature = [0x50, 0x4B, 0x03, 0x04]; // PK (–¥–ª—è .docx, .xlsx)
                const docSignature = [0xD0, 0xCF, 0x11, 0xE0]; // –¥–ª—è —Å—Ç–∞—Ä—ã—Ö .doc, .xls
                
                const startsWithPdf = bytes.slice(0, 4).every((byte, i) => byte === pdfSignature[i]);
                const startsWithZip = bytes.slice(0, 4).every((byte, i) => byte === zipSignature[i]);
                const startsWithDoc = bytes.slice(0, 4).every((byte, i) => byte === docSignature[i]);
                
                if (!startsWithPdf && !startsWithZip && !startsWithDoc) {
                    throw new Error('–§–∞–π–ª –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞—è–≤–ª–µ–Ω–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É');
                }

                console.log(`‚úÖ –§–∞–π–ª ${file.name} –ø—Ä–æ—à—ë–ª –±—ã—Å—Ç—Ä—É—é –ø—Ä–æ–≤–µ—Ä–∫—É`);
                return true;
                
            } catch (error) {
                console.error(`‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ ${file.name}:`, error);
                alert(`‚ö†Ô∏è –§–∞–π–ª "${file.name}" –Ω–µ –ø—Ä–æ—à—ë–ª –ø—Ä–æ–≤–µ—Ä–∫—É: ${error.message}`);
                return false;
            }
        }

        document.getElementById('fileInput').addEventListener('change', async function(e) {
            const newFiles = Array.from(e.target.files);
            
            if (newFiles.length === 0) return;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            const progressDiv = document.getElementById('uploadProgress');
            const progressText = document.getElementById('progressText');
            const progressFill = document.getElementById('progressFill');
            progressDiv.style.display = 'block';
            progressText.textContent = '–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∞–π–ª—ã...';
            progressFill.style.width = '10%';

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª
            const validFiles = [];
            for (let i = 0; i < newFiles.length; i++) {
                const file = newFiles[i];
                progressText.textContent = `–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∞–π–ª ${i + 1} –∏–∑ ${newFiles.length}: ${file.name}`;
                progressFill.style.width = `${10 + (i / newFiles.length) * 40}%`;

                const isValid = await quickVirusScan(file);
                if (isValid) {
                    validFiles.push(file);
                }

                await new Promise(resolve => setTimeout(resolve, 100)); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä
            const currentFiles = selectedFiles;
            const allFiles = [...currentFiles, ...validFiles].slice(0, maxFiles);
            const totalSize = allFiles.reduce((sum, file) => sum + file.size, 0);
            
            if (totalSize > maxTotalSize) {
                alert(`–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 100 –ú–ë. –¢–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä: ${(totalSize / 1024 / 1024).toFixed(2)} –ú–ë`);
                progressDiv.style.display = 'none';
                return;
            }

            selectedFiles = allFiles;
            
            progressText.textContent = '–§–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ!';
            progressFill.style.width = '100%';
            
            setTimeout(() => {
                progressDiv.style.display = 'none';
            }, 1000);

            updateFileList();
            updateSubmitButton();

            if (validFiles.length < newFiles.length) {
                alert(`–ò–∑ ${newFiles.length} —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É: ${validFiles.length}`);
            }
        });

        function getFileSizeClass(size) {
            if (size < 1024 * 1024) return 'file-small'; // < 1 –ú–ë
            if (size < 5 * 1024 * 1024) return 'file-medium'; // < 5 –ú–ë
            return 'file-large'; // >= 5 –ú–ë
        }

        function updateFileList() {
            const fileList = document.getElementById('fileList');
            
            if (selectedFiles.length === 0) {
                fileList.innerHTML = '';
                return;
            }
            
            const totalSize = selectedFiles.reduce((sum, file) => sum + file.size, 0);
            const isSmallUpload = totalSize <= smallFilesLimit;
            
            fileList.innerHTML = `
                <h3>üìÅ –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (${selectedFiles.length} –∏–∑ ${maxFiles}, ${(totalSize / 1024 / 1024).toFixed(2)} –ú–ë –∏–∑ 100 –ú–ë):</h3>
                <div class="${isSmallUpload ? 'success' : 'warning'}">
                    <p><strong>–°–ø–æ—Å–æ–± –æ—Ç–ø—Ä–∞–≤–∫–∏:</strong> ${isSmallUpload ? 
                        'üíå FormSubmit (–º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞)' : 
                        'üìÅ File.io + email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤)'
                    }</p>
                </div>
                ${selectedFiles.map((file, index) => `
                    <div class="file-item ${getFileSizeClass(file.size)}">
                        <div>
                            <strong>${file.name}</strong><br>
                            <small>${(file.size / 1024 / 1024).toFixed(2)} –ú–ë</small>
                        </div>
                        <button type="button" class="remove-btn" onclick="removeFile(${index})">‚úï</button>
                    </div>
                `).join('')}
            `;
        }

        function removeFile(index) {
            selectedFiles.splice(index, 1);
            updateFileList();
            updateSubmitButton();
        }

        function clearFiles() {
            selectedFiles = [];
            updateFileList();
            updateSubmitButton();
        }

        function updateSubmitButton() {
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = selectedFiles.length === 0;
            
            const totalSize = selectedFiles.reduce((sum, file) => sum + file.size, 0);
            const isSmallUpload = totalSize <= smallFilesLimit;
            
            submitBtn.textContent = selectedFiles.length > 0 
                ? `üìß –û—Ç–ø—Ä–∞–≤–∏—Ç—å ${selectedFiles.length} —Ñ–∞–π–ª–æ–≤ (${isSmallUpload ? '–±—ã—Å—Ç—Ä–æ' : '—á–µ—Ä–µ–∑ –æ–±–ª–∞–∫–æ'})`
                : 'üìß –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª—ã';
        }

        document.getElementById('testForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (selectedFiles.length === 0) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏');
                return;
            }
            
            const result = document.getElementById('result');
            const totalSize = selectedFiles.reduce((sum, file) => sum + file.size, 0);
            const isSmallUpload = totalSize <= smallFilesLimit;
            
            if (isSmallUpload) {
                // –ú–∞–ª—ã–µ —Ñ–∞–π–ª—ã - FormSubmit HTML —Ñ–æ—Ä–º–∞
                result.innerHTML = '<div class="info"><p>üíå –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ FormSubmit (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)...</p></div>';
                
                const htmlForm = document.createElement('form');
                htmlForm.method = 'POST';
                htmlForm.action = 'https://formsubmit.co/commerce@rusutil-1.ru';
                htmlForm.enctype = 'multipart/form-data';
                htmlForm.style.display = 'none';
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è
                const fields = [
                    { name: 'name', value: document.querySelector('input[name="name"]').value },
                    { name: 'email', value: document.querySelector('input[name="email"]').value },
                    { name: 'phone', value: document.querySelector('input[name="phone"]').value },
                    { name: 'subject', value: '–¢–ï–°–¢: –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π - utilizon.pro' },
                    { name: '_captcha', value: 'false' },
                    { name: '_template', value: 'table' },
                    { name: '_next', value: 'https://utilizon.pro/success' },
                    { name: '_error', value: 'https://utilizon.pro/error' }
                ];
                
                fields.forEach(field => {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = field.name;
                    input.value = field.value;
                    htmlForm.appendChild(input);
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∞–π–ª—ã
                const fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.name = 'attachment';
                fileInput.multiple = true;
                fileInput.style.display = 'none';
                
                const dataTransfer = new DataTransfer();
                selectedFiles.forEach(file => {
                    dataTransfer.items.add(file);
                });
                fileInput.files = dataTransfer.files;
                
                htmlForm.appendChild(fileInput);
                document.body.appendChild(htmlForm);
                
                setTimeout(() => {
                    htmlForm.submit();
                }, 1000);
                
            } else {
                // –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã - File.io
                result.innerHTML = '<div class="warning"><p>üìÅ –ó–∞–≥—Ä—É–∂–∞–µ–º –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ File.io...</p></div>';
                
                try {
                    const fileLinks = [];
                    
                    for (let i = 0; i < selectedFiles.length; i++) {
                        const file = selectedFiles[i];
                        result.innerHTML = `<div class="info"><p>üì§ –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª ${i + 1}/${selectedFiles.length}: ${file.name}</p></div>`;
                        
                        const fileFormData = new FormData();
                        fileFormData.append('file', file);
                        
                        const uploadResponse = await fetch('https://file.io', {
                            method: 'POST',
                            body: fileFormData
                        });
                        
                        if (!uploadResponse.ok) {
                            throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ ${file.name}: ${uploadResponse.status}`);
                        }
                        
                        const uploadResult = await uploadResponse.json();
                        
                        if (uploadResult.success && uploadResult.link) {
                            fileLinks.push({
                                name: file.name,
                                size: (file.size / 1024 / 1024).toFixed(2) + ' –ú–ë',
                                link: uploadResult.link
                            });
                        } else {
                            throw new Error(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª ${file.name}`);
                        }
                    }
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º email —Å —Å—Å—ã–ª–∫–∞–º–∏
                    result.innerHTML = '<div class="info"><p>üìß –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞ email...</p></div>';
                    
                    const emailFormData = new FormData();
                    emailFormData.append('name', document.querySelector('input[name="name"]').value);
                    emailFormData.append('email', document.querySelector('input[name="email"]').value);
                    emailFormData.append('phone', document.querySelector('input[name="phone"]').value);
                    emailFormData.append('subject', '–¢–ï–°–¢: –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ File.io - utilizon.pro');
                    emailFormData.append('_captcha', 'false');
                    emailFormData.append('_template', 'table');
                    
                    const filesInfo = fileLinks.map((file, index) => 
                        `${index + 1}. ${file.name} (${file.size}) - ${file.link}`
                    ).join('\\n');
                    
                    emailFormData.append('files_info', `–ó–∞–≥—Ä—É–∂–µ–Ω—ã –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã (${fileLinks.length} —à—Ç., ${(totalSize / 1024 / 1024).toFixed(2)} –ú–ë):\\n${filesInfo}`);
                    
                    const emailResponse = await fetch('https://formsubmit.co/ajax/commerce@rusutil-1.ru', {
                        method: 'POST',
                        body: emailFormData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    });
                    
                    if (emailResponse.ok) {
                        result.innerHTML = `
                            <div class="success">
                                <h3>‚úÖ –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!</h3>
                                <p><strong>–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:</strong> ${fileLinks.length}</p>
                                <p><strong>–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä:</strong> ${(totalSize / 1024 / 1024).toFixed(2)} –ú–ë</p>
                                <p><strong>–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏:</strong> File.io + email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</p>
                                <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É: commerce@rusutil-1.ru</p>
                            </div>
                        `;
                        selectedFiles = [];
                        updateFileList();
                        updateSubmitButton();
                        document.getElementById('testForm').reset();
                    } else {
                        throw new Error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ email');
                    }
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤:', error);
                    result.innerHTML = `
                        <div class="error">
                            <h3>‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤</h3>
                            <p><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> ${error.message}</p>
                            <p><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –Ω–∞–ø—Ä—è–º—É—é:</p>
                            <p>üìû <strong>+7 (901) 862-81-81</strong></p>
                            <p>üìß <strong>commerce@rusutil-1.ru</strong></p>
                        </div>
                    `;
                }
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateSubmitButton();
    </script>
</body>
</html>